"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveLogins = void 0;
function resolveLogins(logins) {
    return Promise.all(Object.keys(logins).reduce((arr, name) => {
        const tokenOrProvider = logins[name];
        if (typeof tokenOrProvider === "string") {
            arr.push([name, tokenOrProvider]);
        }
        else {
            arr.push(tokenOrProvider().then((token) => [name, token]));
        }
        return arr;
    }, [])).then((resolvedPairs) => resolvedPairs.reduce((logins, [key, value]) => {
        logins[key] = value;
        return logins;
    }, {}));
}
exports.resolveLogins = resolveLogins;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZUxvZ2lucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXNvbHZlTG9naW5zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUtBLFNBQWdCLGFBQWEsQ0FBQyxNQUFjO0lBQzFDLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUF3RCxFQUFFLElBQVksRUFBRSxFQUFFO1FBQ3BHLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxJQUFJLE9BQU8sZUFBZSxLQUFLLFFBQVEsRUFBRTtZQUN2QyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBcUIsQ0FBQyxDQUFDO1NBQ3ZEO2FBQU07WUFDTCxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFxQixDQUFDLENBQUMsQ0FBQztTQUNoRjtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQyxFQUFFLEVBQXNDLENBQUMsQ0FDM0MsQ0FBQyxJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUN2QixhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBc0IsRUFBRSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQzVELE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDcEIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQyxFQUFFLEVBQW9CLENBQUMsQ0FDekIsQ0FBQztBQUNKLENBQUM7QUFqQkQsc0NBaUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9naW5zLCBSZXNvbHZlZExvZ2lucyB9IGZyb20gXCIuL0xvZ2luc1wiO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUxvZ2lucyhsb2dpbnM6IExvZ2lucyk6IFByb21pc2U8UmVzb2x2ZWRMb2dpbnM+IHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIE9iamVjdC5rZXlzKGxvZ2lucykucmVkdWNlKChhcnI6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10gfCBQcm9taXNlPFtzdHJpbmcsIHN0cmluZ10+PiwgbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbk9yUHJvdmlkZXIgPSBsb2dpbnNbbmFtZV07XG4gICAgICBpZiAodHlwZW9mIHRva2VuT3JQcm92aWRlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBhcnIucHVzaChbbmFtZSwgdG9rZW5PclByb3ZpZGVyXSBhcyBbc3RyaW5nLCBzdHJpbmddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyci5wdXNoKHRva2VuT3JQcm92aWRlcigpLnRoZW4oKHRva2VuKSA9PiBbbmFtZSwgdG9rZW5dIGFzIFtzdHJpbmcsIHN0cmluZ10pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSwgW10gYXMgQXJyYXk8UHJvbWlzZTxbc3RyaW5nLCBzdHJpbmddPj4pXG4gICkudGhlbigocmVzb2x2ZWRQYWlycykgPT5cbiAgICByZXNvbHZlZFBhaXJzLnJlZHVjZSgobG9naW5zOiBSZXNvbHZlZExvZ2lucywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBsb2dpbnNba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGxvZ2lucztcbiAgICB9LCB7fSBhcyBSZXNvbHZlZExvZ2lucylcbiAgKTtcbn1cbiJdfQ==