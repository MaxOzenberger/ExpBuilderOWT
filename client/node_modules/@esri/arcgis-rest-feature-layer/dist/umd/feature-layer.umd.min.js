/* @preserve
* @esri/arcgis-rest-feature-layer - v3.0.5 - Apache-2.0
* Copyright (c) 2017-2021 Esri, Inc.
* Tue Apr 20 2021 08:10:25 GMT-0700 (Pacific Daylight Time)
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@esri/arcgis-rest-request")):"function"==typeof define&&define.amd?define(["exports","@esri/arcgis-rest-request"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).arcgisRest=e.arcgisRest||{},e.arcgisRest)}(this,function(e,a){"use strict";var s=function(){return(s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function n(e){return a.request(a.cleanUrl(e.url),e)}e.addAttachment=function(e){var t=s({params:{}},e);return t.params.attachment=e.attachment,a.request(a.cleanUrl(t.url)+"/"+t.featureId+"/addAttachment",t)},e.addFeatures=function(e){var t=a.cleanUrl(e.url)+"/addFeatures",r=a.appendCustomParams(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:s({},e.params)});return a.request(t,r)},e.applyEdits=function(e){var t=a.cleanUrl(e.url)+"/applyEdits",r=a.appendCustomParams(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:s({},e.params)});return a.request(t,r)},e.decodeValues=function(r){return new Promise(function(t){if(!r.fields)return n({url:r.url}).then(function(e){t(r.fields=e.fields)});t(r.fields)}).then(function(e){var u=e.reduce(function(e,t){var r=t.domain;return r&&"codedValue"===r.type&&(e[t.name]=r),e},{});if(Object.keys(u).length<1)return r.queryResponse;var t=r.queryResponse.features.map(function(e){var t,r,a={};for(var n in e.attributes){e.attributes.hasOwnProperty(n)&&(t=e.attributes[n],r=u[n],a[n]=null!==t&&r?function(t,e){var r=e.codedValues.find(function(e){return t===e.code});return r?r.name:t}(t,r):t)}return s(s({},e),{attributes:a})});return s(s({},r.queryResponse),{features:t})})},e.deleteAttachments=function(e){var t=s({params:{}},e);return t.params.attachmentIds=e.attachmentIds,a.request(a.cleanUrl(t.url)+"/"+t.featureId+"/deleteAttachments",t)},e.deleteFeatures=function(e){var t=a.cleanUrl(e.url)+"/deleteFeatures",r=a.appendCustomParams(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:s({},e.params)});return a.request(t,r)},e.getAttachments=function(e){var t=s({httpMethod:"GET"},e);return a.request(a.cleanUrl(t.url)+"/"+t.featureId+"/attachments",t)},e.getFeature=function(e){var t=a.cleanUrl(e.url)+"/"+e.id,r=s({httpMethod:"GET"},e);return a.request(t,r).then(function(e){return r.rawResponse?e:e.feature})},e.getLayer=n,e.getService=function(e){return a.request(a.cleanUrl(e.url),e)},e.queryFeatures=function(e){var t=a.appendCustomParams(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:s({where:"1=1",outFields:"*"},e.params)});return a.request(a.cleanUrl(e.url)+"/query",t)},e.queryRelated=function(e){var t=a.appendCustomParams(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:s({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return a.request(a.cleanUrl(e.url)+"/queryRelatedRecords",t)},e.updateAttachment=function(e){var t=s({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,a.request(a.cleanUrl(t.url)+"/"+t.featureId+"/updateAttachment",t)},e.updateFeatures=function(e){var t=a.cleanUrl(e.url)+"/updateFeatures",r=a.appendCustomParams(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:s({},e.params)});return a.request(t,r)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=feature-layer.umd.min.js.map
